# RichStudent 완전 구현 개발 로드맵

## 📋 현재 상황 분석

### ✅ 구현 완료 (Phase 1-5)
- **Phase 1**: 교사/학생 인증 시스템
- **Phase 2**: 학생 관리 시스템  
- **Phase 3**: 기본 거래 시스템 (송금, 용돈)
- **Phase 4**: 학생 대시보드 기본 기능
- **Phase 5**: 실시간 시장 데이터 시스템

### 🚧 미구현 핵심 기능들

**기존 Google Apps Script에서 구현되어 있던 주요 기능들:**

1. **투자 시스템**
   - 주식/암호화폐/원자재 매수/매도
   - 포트폴리오 관리 및 손익 계산
   - 소수점 거래 지원 (비트코인, 금 등)

2. **부동산(자리) 거래 시스템**
   - 교실 자리를 자산으로 거래
   - 동적 가격 산정: `총 학생 자산 / (학생 수 × 10)`
   - 자리 소유권 관리

3. **경제 주체 시스템**
   - **정부**: 세금 징수, 자금 분배
   - **은행**: 신용점수 기반 대출 (350-850점)
   - **증권사**: 거래 수수료 (매수 0.1%, 매도 0.2%)

4. **신용점수 시스템**
   - 기본 700점, 범위 350-850점
   - 교사의 ±5, ±10, ±15, ±20점 조정
   - 대출 이자율에 영향

5. **고급 거래 기능**
   - 계좌 간 이체 (입출금 ↔ 저축 ↔ 투자)
   - 집단 거래 (한번에 여러 학생)
   - 수수료 자동 징수

---

## 🎯 Phase 6-10 개발 계획

### **Phase 6: 투자 시스템 구현 (우선순위 1)**

**목표**: 학생들이 시장 데이터를 바탕으로 실제 투자할 수 있는 시스템

**구현 내용:**
- 📊 **포트폴리오 테이블**: 학생별 보유 자산 관리
- 💰 **매수/매도 API**: 실시간 가격으로 거래 실행
- 📈 **손익 계산**: 평균 매수가 vs 현재가 비교
- 🔢 **소수점 거래**: 비트코인, 금 등 0.1 단위 거래
- 🎨 **투자 UI**: 매수/매도 폼, 포트폴리오 현황

**데이터베이스 스키마:**
```sql
-- 포트폴리오: 학생별 보유 자산
portfolio (student_id, asset_id, quantity, average_price, total_invested)

-- 자산 거래: 모든 투자 거래 기록
asset_transactions (student_id, asset_id, type, quantity, price, fee, timestamp)
```

**API 엔드포인트:**
- `POST /api/investments/buy` - 자산 매수
- `POST /api/investments/sell` - 자산 매도  
- `GET /api/investments/portfolio` - 포트폴리오 조회
- `GET /api/investments/history` - 투자 거래 내역

---

### **Phase 7: 부동산(자리) 거래 시스템 (우선순위 2)**

**목표**: 교실 자리를 거래 가능한 자산으로 구현

**구현 내용:**
- 🪑 **자리 자산화**: 각 자리를 고유 자산으로 등록
- 💹 **동적 가격**: `총 학생 자산 / (학생 수 × 10)` 공식 적용
- 🏠 **소유권 관리**: 자리별 소유자 추적
- 📊 **자리 거래소**: 자리 매수/매도 인터페이스
- 🎯 **가격 업데이트**: 학생 자산 변동 시 자동 가격 갱신

**핵심 로직:**
```javascript
// 자리 가격 계산
const seatPrice = totalStudentAssets / (activeStudentCount * 10)

// 자리 거래 수수료 (증권사)
const brokerageFee = seatPrice * 0.001 // 0.1%
const taxFee = seatPrice * 0.002 // 0.2% (매도시)
```

---

### **Phase 8: 경제 주체 시스템 (우선순위 3)**

**목표**: 정부, 은행, 증권사가 실제 경제 활동에 참여

**구현 내용:**

**8-1. 정부 시스템**
- 💰 **세금 징수**: 개별/집단, 정률/정액 세금
- 🎁 **자금 분배**: 복지 지급, 장려금 등
- 📊 **정부 예산**: 세수입-지출 관리

**8-2. 은행 시스템** 
- 🏦 **대출 서비스**: 신용점수 기반 이자율
- 💳 **신용점수**: 350-850점 관리
- 📈 **이자 계산**: 대출 잔액에 대한 정기 이자

**8-3. 증권사 시스템**
- 💼 **거래 수수료**: 모든 투자 거래에서 자동 징수
- 📊 **수수료 정산**: 증권사 계좌로 수수료 이체

---

### **Phase 9: 고급 거래 및 계좌 시스템 (우선순위 4)**

**목표**: 실제 은행처럼 다양한 계좌 운용

**구현 내용:**
- 🔄 **계좌 간 이체**: 입출금 ↔ 저축 ↔ 투자 계좌
- 📊 **저축 이자**: 저축 계좌 잔액에 대한 이자 지급  
- 💰 **투자 계좌**: 주식/자산 거래 전용 계좌
- 📱 **계좌 관리 UI**: 실시간 잔액, 이체 내역

---

### **Phase 10: 교사 고급 관리 도구 (우선순위 5)**

**목표**: 교사가 경제 상황을 세밀하게 제어

**구현 내용:**
- 📊 **경제 대시보드**: 전체 경제 지표 모니터링
- ⚖️ **신용점수 관리**: 학생별 점수 조정 도구  
- 🏛️ **경제 주체 제어**: 정부/은행/증권사 설정
- 📈 **시나리오 시뮬레이션**: 경제 위기, 호황 등
- 📋 **리포트 생성**: 학생별 경제 활동 분석

---

## 🗓️ 구현 일정 (예상)

```
Week 1-2: Phase 6 (투자 시스템) - 핵심 기능
Week 3: Phase 7 (부동산 시스템) - 차별화 기능  
Week 4: Phase 8 (경제 주체) - 고급 기능
Week 5: Phase 9 (고급 거래) - 완성도 향상
Week 6: Phase 10 (교사 도구) - 최종 완성
```

## 🎯 즉시 시작할 Phase 6 상세 계획

### 1. 데이터베이스 스키마 설계
- Portfolio 테이블 생성
- Asset_transactions 테이블 확장
- 기존 market_assets와 연동

### 2. 투자 API 개발
- 매수/매도 로직 구현
- 잔액 검증 및 수수료 계산
- 포트폴리오 업데이트 로직

### 3. 학생 투자 UI 개발
- 시장 데이터 + 거래 인터페이스 통합
- 포트폴리오 현황 표시
- 실시간 손익 계산

### 4. 교사 투자 모니터링
- 학생별 투자 현황 대시보드
- 투자 거래 내역 조회
- 포트폴리오 분석 도구

---

**이제 Phase 6 투자 시스템부터 바로 시작해보시겠습니까?** 🚀