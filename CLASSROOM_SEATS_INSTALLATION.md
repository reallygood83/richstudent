# 🏫 교실 좌석 거래 시스템 설치 가이드

## 📋 개요

6x5 (30개) 좌석 배치의 실시간 교실 좌석 거래 시스템을 설치합니다.
- 좌석 가격은 학생들의 총 자산에 따라 실시간으로 변동
- 칠판 위치를 시각화하여 좌석 위치 명확화
- 구매/판매 시 실시간 UI 업데이트

## 🚀 설치 단계

### 1. 데이터베이스 스키마 설치

Supabase 대시보드의 SQL Editor에서 다음 파일을 실행:

```bash
CLASSROOM_SEATS_SCHEMA.sql
```

이 스크립트는 다음을 생성합니다:
- `classroom_seats` 테이블 (30개 좌석 기본 데이터 포함)
- `seat_transactions` 테이블 (거래 기록)
- 좌석 가격 계산 함수들
- 좌석 구매/판매 함수들

### 2. API 라우트 확인

다음 API 엔드포인트가 생성되었는지 확인:
- `/api/real-estate/seats` - 좌석 목록 조회
- `/api/real-estate/buy` - 좌석 구매
- `/api/real-estate/sell` - 좌석 판매  
- `/api/real-estate/price-update` - 가격 업데이트

### 3. 컴포넌트 확인

다음 컴포넌트가 생성되었는지 확인:
- `ClassroomSeats.tsx` - 학생용 좌석 거래 인터페이스
- `ClassroomSeatsAdmin.tsx` - 교사용 좌석 관리 인터페이스

### 4. 라우팅 확인

- 학생용 페이지: `/student/real-estate`
- 교사 대시보드에 "좌석 관리" 탭 추가됨

## 🎮 사용법

### 학생 사용법

1. **대시보드 접속**: 학생 로그인 후 대시보드에서 "교실 좌석 거래소" 버튼 클릭
2. **좌석 구매**: 
   - 초록색 좌석 클릭으로 구매
   - 현재 가격에 자동 구매
   - 잔액 부족 시 구매 불가
3. **좌석 판매**: 
   - 파란색(내 좌석) 클릭으로 판매
   - 현재 시장 가격으로 자동 판매
4. **실시간 확인**:
   - 내 소유 좌석 목록과 손익 확인
   - 좌석 가격 실시간 변동 확인

### 교사 사용법

1. **관리 대시보드**: 교사 대시보드 → "좌석 관리" 탭
2. **현황 모니터링**:
   - 총 좌석 수, 소유된 좌석, 구매 가능한 좌석
   - 총 거래액 현황
   - 개별 좌석 소유자 및 손익 상황
3. **가격 관리**:
   - 자동 가격 계산 확인
   - 수동 가격 업데이트 가능
4. **실시간 모니터링**:
   - 30초마다 자동 새로고침
   - 좌석별 상세 정보 (마우스 오버)

## 💰 가격 계산 방식

```
좌석 가격 = (전체 학생 자산 합계) ÷ (학생 수) ÷ 10
```

- 경제 주체(정부, 은행, 증권사) 자산은 제외
- 최소 가격: 10,000원 보장
- 학생 자산 증가 시 좌석 가격도 상승

## 🏗️ 좌석 배치

```
📚 칠판 📚

 1   2   3   4   5   6     ← 1행 (앞줄)
 7   8   9  10  11  12     ← 2행
13  14  15  16  17  18     ← 3행  
19  20  21  22  23  24     ← 4행
25  26  27  28  29  30     ← 5행 (뒷줄)
```

## 🔧 테스트 방법

### 1. 기본 기능 테스트
```sql
-- 좌석 데이터 확인
SELECT * FROM classroom_seats ORDER BY seat_number;

-- 가격 계산 테스트
SELECT calculate_seat_price() as current_price;
```

### 2. 거래 기능 테스트
1. 학생으로 로그인
2. 잔액 확인 (좌석 가격보다 많아야 함)
3. 빈 좌석(초록색) 클릭하여 구매
4. 내 좌석(파란색) 클릭하여 판매

### 3. 교사 모니터링 테스트
1. 교사 대시보드 → 좌석 관리 탭
2. 실시간 현황 확인
3. 수동 가격 업데이트 테스트

## 🚨 주의사항

1. **잔액 확인**: 좌석 구매 전 충분한 잔액 필요
2. **동시 거래**: 같은 좌석에 대한 동시 거래 시 선착순 처리
3. **가격 변동**: 거래 완료 후 모든 좌석 가격 자동 재계산
4. **세션 관리**: 학생 로그인 상태 확인 필요

## 📈 확장 기능

추후 추가 예정:
- 좌석 예약 시스템
- 좌석별 프리미엄 (창가, 앞줄 등)
- 좌석 경매 시스템
- 좌석 투자 수익률 분석

## 🎉 완료!

모든 설치가 완료되었습니다. 학생들은 이제 교실 좌석을 실제 부동산처럼 거래하며 경제 원리를 체험할 수 있습니다!